{"version":3,"file":"AssetSchedule.js","sources":["../../../../../../src/components/Organisms/AssetTile/elements/AssetSchedule.tsx"],"sourcesContent":["import React from 'react'\nimport { Tag } from '@/components/Atoms/Tag'\nimport { css, styled } from '@/styles/styled'\nimport { ThemeColors } from '@/types'\nimport { StyleguideCalendar, IconLiveLabel } from '@excelwithbusiness/webmobile-svg-library'\nimport { Icon } from '@/components/Atoms/Icon'\n\ntype TimeBoxValues = string | null\n\ntype Timebox = {\n  start?: TimeBoxValues | undefined\n  end?: TimeBoxValues | undefined\n}\n\nexport interface AssetSchedule {\n  timebox?: Timebox | undefined\n  color?: ThemeColors\n}\n\nexport const StyledIcon = styled(Icon)(\n  ({ theme }) => css`\n    position: absolute;\n    z-index: 25;\n    padding-left: ${theme.spacing.base.md};\n    top: 4px;\n    left: 0;\n  `\n)\n\nexport const StyledLiveLabel = styled(Icon)(\n  ({ theme }) => css`\n    position: absolute;\n    z-index: 25;\n    padding-left: ${theme.spacing.base.sm};\n    top: 0;\n    left: 0;\n  `\n)\n\nconst StyledAssetSchedule = styled.div(\n  ({ theme }) => css`\n    position: absolute;\n    z-index: 20;\n    display: flex;\n    padding: 0 ${theme.spacing.base.sm};\n    top: ${theme.spacing.base.sm};\n    left: 0;\n  `\n)\n\nconst StyledTag = styled(Tag)`\n  border-radius: 6px;\n  background-color: rgba(0, 0, 0, 0.5);\n  border-color: transparent;\n\n  span {\n    font-size: 12px;\n    line-height: 17px;\n  }\n`\n\n// Timebox object\n// create a new date object for both start and end and current date\n\nexport const AssetSchedule: React.FC<AssetSchedule> = ({ timebox, color }) => {\n  const startTime = new Date(timebox?.start as string)\n  const endTime = new Date(timebox?.end as string)\n  const currentTime = new Date()\n\n  const date = new Intl.DateTimeFormat('en-GB', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  })\n\n  const time = new Intl.DateTimeFormat('en-GB', {\n    hour: 'numeric',\n    // @ts-ignore\n    hourCycle: 'h12',\n  })\n\n  const formattedDate = date.format(startTime)\n  const formattedTime = time.format(startTime).toLocaleUpperCase()\n  const tn = Intl.DateTimeFormat().resolvedOptions().timeZone\n\n  const fullStart = `${formattedDate}, ${formattedTime} ${tn}`\n\n  const beforeScheduledTime = currentTime.getTime() < startTime.getTime()\n  const startScheduledTime = currentTime.getTime() > startTime.getTime()\n  const duringScheduledTime = currentTime.getTime() < endTime.getTime()\n\n  const showTimeSchedule = beforeScheduledTime && (duringScheduledTime || !timebox?.end)\n  const showTimeLive = startScheduledTime && (duringScheduledTime || !timebox?.end)\n\n  return (\n    <StyledAssetSchedule>\n      {showTimeSchedule && !showTimeLive && (\n        <>\n          <StyledIcon color=\"white\" width=\"sm\" height=\"sm\">\n            <StyleguideCalendar />\n          </StyledIcon>\n          <StyledTag\n            weight=\"bold\"\n            padding={{ left: 'lg', right: 'xs' }}\n            text={fullStart}\n            color={color}\n          />\n        </>\n      )}\n      {showTimeLive && (\n        <StyledLiveLabel color=\"transparent\" width={62} height={23}>\n          <IconLiveLabel />\n        </StyledLiveLabel>\n      )}\n    </StyledAssetSchedule>\n  )\n}\n"],"names":["StyledIcon","styled","Icon","theme","css","spacing","base","md","StyledLiveLabel","sm","StyledAssetSchedule","div","StyledTag","Tag","AssetSchedule","timebox","color","startTime","Date","start","endTime","end","currentTime","date","Intl","DateTimeFormat","year","month","day","time","hour","hourCycle","formattedDate","format","formattedTime","toLocaleUpperCase","tn","resolvedOptions","timeZone","fullStart","beforeScheduledTime","getTime","startScheduledTime","duringScheduledTime","showTimeSchedule","showTimeLive","React","width","height","StyleguideCalendar","weight","padding","left","right","text","IconLiveLabel"],"mappings":"0bAmBaA,EAAaC,EAAOC,+EAAPD,EACxB,gBAAGE,IAAAA,aAAYC,oEAGGD,EAAME,QAAQC,KAAKC,OAM1BC,EAAkBP,EAAOC,oFAAPD,EAC7B,gBAAGE,IAAAA,aAAYC,kEAGGD,EAAME,QAAQC,KAAKG,OAMjCC,EAAsBT,EAAOU,yFAAPV,EAC1B,gBAAGE,IAAAA,aAAYC,8EAIAD,EAAME,QAAQC,KAAKG,GACzBN,EAAME,QAAQC,KAAKG,OAKxBG,EAAYX,EAAOY,8EAAPZ,yHAcLa,EAAyC,gBAAGC,IAAAA,QAASC,IAAAA,MAC1DC,EAAY,IAAIC,KAAKH,MAAAA,SAAAA,EAASI,OAC9BC,EAAU,IAAIF,KAAKH,MAAAA,SAAAA,EAASM,KAC5BC,EAAc,IAAIJ,KAElBK,EAAO,IAAIC,KAAKC,eAAe,QAAS,CAC5CC,KAAM,UACNC,MAAO,QACPC,IAAK,YAGDC,EAAO,IAAIL,KAAKC,eAAe,QAAS,CAC5CK,KAAM,UAENC,UAAW,QAGPC,EAAgBT,EAAKU,OAAOhB,GAC5BiB,EAAgBL,EAAKI,OAAOhB,GAAWkB,oBACvCC,EAAKZ,KAAKC,iBAAiBY,kBAAkBC,SAE7CC,YAAeP,eAAkBE,cAAiBE,GAElDI,EAAsBlB,EAAYmB,UAAYxB,EAAUwB,UACxDC,EAAqBpB,EAAYmB,UAAYxB,EAAUwB,UACvDE,EAAsBrB,EAAYmB,UAAYrB,EAAQqB,UAEtDG,EAAmBJ,IAAwBG,KAAwB5B,MAAAA,GAAAA,EAASM,MAC5EwB,EAAeH,IAAuBC,KAAwB5B,MAAAA,GAAAA,EAASM,aAG3EyB,gBAACpC,OACEkC,IAAqBC,GACpBC,gCACEA,gBAAC9C,GAAWgB,MAAM,QAAQ+B,MAAM,KAAKC,OAAO,MAC1CF,gBAACG,SAEHH,gBAAClC,GACCsC,OAAO,OACPC,QAAS,CAAEC,KAAM,KAAMC,MAAO,MAC9BC,KAAMf,EACNvB,MAAOA,KAIZ6B,GACCC,gBAACtC,GAAgBQ,MAAM,cAAc+B,MAAO,GAAIC,OAAQ,IACtDF,gBAACS"}