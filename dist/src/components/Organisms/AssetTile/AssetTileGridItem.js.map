{"version":3,"file":"AssetTileGridItem.js","sources":["../../../../../src/components/Organisms/AssetTile/AssetTileGridItem.tsx"],"sourcesContent":["import React, { useRef } from 'react'\nimport { AssetTileVariantProps } from '@/components/Organisms/AssetTile/helpers/layout'\nimport { useHistory } from 'react-router-dom'\nimport {\n  AssetCard,\n  AssetFeatured,\n  AssetImage,\n  AssetTileContent,\n  AssetTileMeta,\n  AssetSchedule,\n  StyledBookmarkPlaceholder,\n} from '@/components/Organisms/AssetTile/elements'\nimport { AssetLocked } from '@/components/Organisms/AssetTile/elements/AssetLocked'\nimport {\n  isPortrait,\n  StyledContentContainer,\n  StyledDivider,\n  StyledHeadingContainer,\n  StyledResponsiveContainer,\n  StyledTile,\n  StyledAdditionalContent,\n} from '@/components/Organisms/AssetTile/AssetTile.styled'\nimport {\n  AssetStrategy,\n  AssetTileLayout,\n  MetaItem,\n} from '@/components/Organisms/AssetTile/AssetTile.interface'\nimport { getMetaItemList } from '@/components/Organisms/AssetTile/helpers/icons'\nimport { AssetSponsoring } from '@/components/Organisms/AssetTile/elements/AssetSponsoring'\nimport { ShowMore } from '@/components/Atoms/ShowMore'\nimport { CopyText } from '@/components/Atoms/Typography'\n\nconst DEFAULT_LINE_LIMIT = 2\n\nexport const AssetTileGridItem: React.FC<AssetTileVariantProps> = ({\n  badgeActionType = 'prominent',\n  assetView = 'list',\n  strategyType = AssetStrategy.none,\n  children,\n  color,\n  elevation = 0,\n  elevationHover = 0,\n  isCollection,\n  isOpenAsset = false,\n  headlineLimitLines = DEFAULT_LINE_LIMIT,\n  limitContentLines = DEFAULT_LINE_LIMIT,\n  assetSponsoring,\n  icon,\n  mainLink,\n  badges,\n  competencyLabel,\n  showBadges = true,\n  showBookmark = true,\n  showLock = false,\n  showSkills = true,\n  showAssetMeta = true,\n  showProvider = true,\n  showFeatured = false,\n  isDisabled,\n  noBorder,\n  lazyloadLowQuality = false,\n  layout = AssetTileLayout.gridItem,\n  loading = false,\n  sponsoringDetails,\n  asset,\n  renderAddToBookmarkButton,\n  showMoreText,\n  showLessText,\n  showMoreNumOfLines,\n  showMoreAlignment,\n  fadeOutColor,\n  lazyLoad,\n  roundImages,\n  onClick,\n  onCompleteClick,\n  onPictureClick,\n  onHeadingClick,\n  onLockClick,\n  orientation = 'portrait',\n  videoFallbackImage,\n  ...rest\n}) => {\n  if (!asset) {\n    return null\n  }\n\n  const history = useHistory()\n  const ref = useRef(null)\n\n  const { title, image, provider, duration, type, interaction, id } = asset\n\n  const metaInputs: MetaItem | any = isCollection\n    ? {\n        duration: asset?.totalAssetDuration,\n        type: null,\n        completedStatus: asset?.completionPercentage,\n        numberOfAssets: asset?.numberOfAssets,\n      }\n    : isOpenAsset\n    ? {\n        duration: asset?.eventDate,\n        type: type?.name,\n        completedStatus: null,\n        numberOfAssets: null,\n      }\n    : { duration, type: type?.name, completedStatus: asset?.completionPercentage }\n\n  const metaItems = getMetaItemList({ ...metaInputs })\n  const useOverride = asset?.type?.name === 'Video' && !asset?.image\n\n  const imageDimensions =\n    orientation === 'portrait'\n      ? { height: '200px', width: '100%', minHeight: '200px', maxWidth: '100%' }\n      : { height: '300px', width: '100%', minHeight: '300px', maxWidth: '100%' }\n\n  const onTileClick = React.useCallback(\n    (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n      if (loading || isDisabled) {\n        return null\n      }\n\n      if (typeof onClick === 'function') {\n        onClick(event)\n      }\n\n      if (mainLink) {\n        // navigate to mainLink\n        if (mainLink.to) return history.push(mainLink.to)\n        if (mainLink.href) return (window.location.href = mainLink.href)\n      }\n    },\n    [history, mainLink, onClick]\n  )\n\n  const onLockedClick = React.useCallback(\n    (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n      if (loading) {\n        return null\n      }\n\n      if (typeof onLockClick === 'function') {\n        onLockClick(event)\n      }\n    },\n    [onLockClick]\n  )\n\n  const onTileClickHandler = (event: React.MouseEvent<HTMLElement, MouseEvent>) =>\n    asset?.locked ? onLockedClick(event) : onTileClick(event)\n\n  const assetMediaChildren = (\n    <>\n      <StyledBookmarkPlaceholder>\n        {showBookmark &&\n          renderAddToBookmarkButton &&\n          renderAddToBookmarkButton({\n            title,\n            provider,\n            duration,\n            type,\n            completed: interaction?.completed,\n            bookmarked: interaction?.bookmarked,\n            id,\n          })}\n      </StyledBookmarkPlaceholder>\n      {showLock && !loading && <AssetLocked color=\"grey4\" locked={asset?.locked} />}\n    </>\n  )\n\n  return (\n    <StyledTile ref={ref} orientation={orientation} {...rest}>\n      <AssetCard\n        elevationHover={elevationHover}\n        isDisabled={asset?.locked || isDisabled}\n        badges={badges}\n        noBorder={noBorder}\n        borderColor=\"grey2\">\n        <StyledResponsiveContainer orientation={orientation} aria-orientation=\"horizontal\">\n          <AssetImage\n            lazyLoad={lazyLoad}\n            loading={!!loading}\n            assetImage={useOverride ? videoFallbackImage : image}\n            rounded={roundImages}\n            onPictureClick={onTileClickHandler}\n            title={title}\n            {...imageDimensions}>\n            {showFeatured && !loading && (\n              <AssetFeatured loading={loading} featuredLabel={asset?.featureLabel} color=\"grey5\" />\n            )}\n            {strategyType === AssetStrategy.timebox && !loading && (\n              <AssetSchedule timebox={asset?.timebox} color=\"white\" />\n            )}\n          </AssetImage>\n          {isPortrait(orientation) && <StyledDivider color=\"primary\" height=\"xs\" />}\n          <StyledContentContainer aria-orientation=\"horizontal\">\n            {assetMediaChildren}\n            {!loading && assetSponsoring?.isSponsored && (\n              <AssetSponsoring layout=\"tile\" sponsoringDetails={assetSponsoring} />\n            )}\n            <StyledHeadingContainer>\n              <AssetTileContent\n                loading={!!loading}\n                provider={provider?.name ?? undefined}\n                isDisabled={isDisabled}\n                isCompact={!showProvider}\n                description={title}\n                onHeadingClick={onTileClickHandler}\n                skills={asset?.competencies}\n                showSkills={showSkills}\n                limitContentLines={limitContentLines}\n              />\n            </StyledHeadingContainer>\n            {!isPortrait(orientation) && (\n              <StyledAdditionalContent>\n                <ShowMore\n                  lineHeight={19}\n                  fontSize={14}\n                  fontColor=\"grey5\"\n                  loading={loading}\n                  fadeOutBackgroundColor={fadeOutColor}\n                  labelAlignment={showMoreAlignment}\n                  fadeOutHeight={35}\n                  numOfLines={showMoreNumOfLines || 4}\n                  showMoreText={showMoreText || 'Show more'}\n                  showLessText={showLessText || 'Show less'}>\n                  {asset?.description && (\n                    <CopyText tag=\"p\" padding=\"0\" margin=\"xxs 0\" color=\"grey5\" display=\"flex\">\n                      {asset?.description.replace(/(<([^>]+)>)/gi, '')}\n                    </CopyText>\n                  )}\n                </ShowMore>\n              </StyledAdditionalContent>\n            )}\n            {children}\n            {showAssetMeta && (\n              <AssetTileMeta\n                isCompact={isCollection}\n                loading={!!loading}\n                alignSelf=\"flex-end\"\n                isDisabled={isDisabled}\n                onClick={onTileClickHandler}\n                metaItems={metaItems}\n              />\n            )}\n          </StyledContentContainer>\n        </StyledResponsiveContainer>\n      </AssetCard>\n    </StyledTile>\n  )\n}\n"],"names":["AssetTileGridItem","badgeActionType","assetView","strategyType","AssetStrategy","none","children","color","elevation","elevationHover","isCollection","isOpenAsset","headlineLimitLines","limitContentLines","assetSponsoring","icon","mainLink","badges","competencyLabel","showBadges","showBookmark","showLock","showSkills","showAssetMeta","showProvider","showFeatured","isDisabled","noBorder","lazyloadLowQuality","layout","AssetTileLayout","gridItem","loading","sponsoringDetails","asset","renderAddToBookmarkButton","showMoreText","showLessText","showMoreNumOfLines","showMoreAlignment","fadeOutColor","lazyLoad","roundImages","onClick","onCompleteClick","onPictureClick","onHeadingClick","onLockClick","orientation","videoFallbackImage","rest","history","useHistory","ref","useRef","title","image","provider","duration","type","interaction","id","metaInputs","totalAssetDuration","completedStatus","completionPercentage","numberOfAssets","eventDate","name","metaItems","getMetaItemList","useOverride","imageDimensions","height","width","minHeight","maxWidth","onTileClick","React","useCallback","event","to","push","href","window","location","onLockedClick","onTileClickHandler","locked","assetMediaChildren","StyledBookmarkPlaceholder","completed","bookmarked","AssetLocked","StyledTile","AssetCard","borderColor","StyledResponsiveContainer","AssetImage","assetImage","rounded","AssetFeatured","featuredLabel","featureLabel","timebox","AssetSchedule","isPortrait","StyledDivider","StyledContentContainer","isSponsored","AssetSponsoring","StyledHeadingContainer","AssetTileContent","undefined","isCompact","description","skills","competencies","StyledAdditionalContent","ShowMore","lineHeight","fontSize","fontColor","fadeOutBackgroundColor","labelAlignment","fadeOutHeight","numOfLines","CopyText","tag","padding","margin","display","replace","AssetTileMeta","alignSelf"],"mappings":"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"}