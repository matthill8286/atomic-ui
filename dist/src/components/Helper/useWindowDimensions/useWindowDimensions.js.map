{"version":3,"file":"useWindowDimensions.js","sources":["../../../../../src/components/Helper/useWindowDimensions/useWindowDimensions.tsx"],"sourcesContent":["import debounce from 'lodash/debounce'\nimport * as React from 'react'\nimport { breakpoints } from '@/styles'\n\ntype breakpointValue = 1472 | 1232 | 1008 | 752 | 512\nexport type breakpointName = 'xxl' | 'xl' | 'lg' | 'md' | 'sm' | 'xs'\n\nconst breakpointNamesMapping = {\n  1472: 'xxl',\n  1232: 'xl',\n  1008: 'lg',\n  752: 'md',\n  512: 'sm',\n  0: 'xs',\n}\n\nexport interface WindowDimensions {\n  width: number\n  height: number\n  breakpoint: breakpointValue | 0\n  breakpointName: breakpointName\n}\n\n// todo add isUp isDown functions\nexport const getWindowDimensions = (): WindowDimensions => {\n  if (typeof window === 'undefined') {\n    return {\n      width: 0,\n      height: 0,\n      breakpoint: 0,\n      breakpointName: 'sm',\n    }\n  }\n  const { innerWidth: width, innerHeight: height } = window\n  const breakpoint =\n    Object.values(breakpoints)\n      .sort((a, b) => b - a)\n      .find(w => width >= w) || 0\n  return {\n    width,\n    height,\n    breakpoint,\n    breakpointName: breakpointNamesMapping[breakpoint],\n  }\n}\n\nconst frameThrottle = (func: FrameRequestCallback) => {\n  let frame: number | undefined\n  const cancel = () => {\n    if (frame !== undefined) cancelAnimationFrame(frame)\n  }\n  const throttled = () => {\n    if (frame !== undefined) cancelAnimationFrame(frame)\n    frame = requestAnimationFrame(func)\n  }\n  return [throttled, cancel]\n}\n\n// Pass 'frame' to throttle resize events matching the framerate\nexport const useWindowDimensions = (delay: number | 'frame' = 250) => {\n  const [windowDimensions, setWindowDimensions] = React.useState(getWindowDimensions())\n\n  React.useEffect(() => {\n    if (typeof window === 'undefined') return\n    const update = () => setWindowDimensions(getWindowDimensions())\n    const [limitedUpdate, cancel] =\n      delay === 'frame' ? frameThrottle(update) : [debounce(update, delay)]\n    update()\n    window.addEventListener('resize', limitedUpdate)\n    return () => {\n      window.removeEventListener('resize', limitedUpdate)\n      cancel?.()\n    }\n  }, [delay])\n\n  return windowDimensions\n}\n"],"names":["breakpointNamesMapping","getWindowDimensions","window","width","height","breakpoint","breakpointName","innerWidth","innerHeight","Object","values","breakpoints","sort","a","b","find","w","frameThrottle","func","frame","undefined","cancelAnimationFrame","requestAnimationFrame","useWindowDimensions","delay","React","useState","windowDimensions","setWindowDimensions","useEffect","update","debounce","limitedUpdate","cancel","addEventListener","removeEventListener"],"mappings":"qOAOA,IAAMA,EAAyB,MACvB,WACA,UACA,SACD,SACA,OACF,MAWQC,EAAsB,cACX,oBAAXC,aACF,CACLC,MAAO,EACPC,OAAQ,EACRC,WAAY,EACZC,eAAgB,YAG+BJ,OAA/BC,IAAZI,WAAgCH,IAAbI,YACrBH,EACJI,OAAOC,OAAOC,GACXC,MAAK,SAACC,EAAGC,UAAMA,EAAID,KACnBE,MAAK,SAAAC,UAAKb,GAASa,MAAM,QACvB,CACLb,MAAAA,EACAC,OAAAA,EACAC,WAAAA,EACAC,eAAgBN,EAAuBK,KAIrCY,EAAgB,SAACC,OACjBC,QAQG,CAJW,gBACFC,IAAVD,GAAqBE,qBAAqBF,GAC9CA,EAAQG,sBAAsBJ,IALjB,gBACCE,IAAVD,GAAqBE,qBAAqBF,MAUrCI,EAAsB,eAACC,yDAA0B,MACZC,EAAMC,SAASzB,cAAxD0B,OAAkBC,cAEzBH,EAAMI,WAAU,cACQ,oBAAX3B,YACL4B,EAAS,kBAAMF,EAAoB3B,QAE7B,UAAVuB,EAAoBP,EAAca,GAAU,CAACC,EAASD,EAAQN,aADzDQ,OAAeC,cAEtBH,IACA5B,OAAOgC,iBAAiB,SAAUF,GAC3B,WACL9B,OAAOiC,oBAAoB,SAAUH,GACrCC,MAAAA,GAAAA,QAED,CAACT,IAEGG"}