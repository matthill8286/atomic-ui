{"version":3,"file":"SearchDropdown.js","sources":["../../../../../src/components/Molecules/SearchDropdown/SearchDropdown.tsx"],"sourcesContent":["import React, { RefObject } from 'react'\nimport { IconSearch } from '@excelwithbusiness/webmobile-svg-library'\nimport { SearchButton } from '../SearchButton'\nimport { SearchDropdownProps } from './SearchDropdown.interface'\nimport { StyledSearchDropdownWrapper, StyledSearchList } from './SearchDropdown.styled'\nimport { SearchDropdownOption } from './SearchDropdownOption'\n\nexport const SearchDropdown: React.FC<SearchDropdownProps> = props => {\n  const {\n    className,\n    index,\n    inputValue,\n    initializeOpen = false,\n    errorMessage,\n    options = [],\n    searchPlaceholder,\n    onSelectChange,\n    onInputChange,\n  } = props\n\n  const ref = React.useRef<HTMLDivElement>(null)\n\n  const [isOpen, setOpen] = React.useState(initializeOpen)\n  const [filteredOptions, setFilteredOptions] = React.useState(options)\n\n  const handleClickOutside = (event: Event): void => {\n    if (!ref.current?.contains(event.target as Node)) {\n      setOpen(false)\n    }\n  }\n\n  React.useEffect(() => {\n    document.addEventListener('click', handleClickOutside, true)\n\n    return () => {\n      document.removeEventListener('click', handleClickOutside, true)\n    }\n  })\n\n  const onFocus = () => {\n    setOpen(true)\n  }\n\n  const onClickHandler = (item, index) => {\n    setOpen(false)\n    onSelectChange(item, index)\n  }\n\n  const onInputChangeHandler = event => {\n    const { value } = event.target\n    setFilteredOptions(\n      value\n        ? options.filter(option => option?.label?.toLowerCase().includes(value.toLowerCase()))\n        : options\n    )\n\n    onInputChange(event)\n  }\n\n  return (\n    <>\n      <StyledSearchDropdownWrapper className={className} ref={ref}>\n        <SearchButton\n          placeholder={searchPlaceholder}\n          state={errorMessage ? 'error' : 'idle'}\n          errorMessage={errorMessage}\n          value={inputValue}\n          onFocus={onFocus}\n          onChange={onInputChangeHandler}\n          searchIcon={<IconSearch />}\n          searchType=\"text\"\n        />\n      </StyledSearchDropdownWrapper>\n      <StyledSearchList active={isOpen} isSearchable>\n        {filteredOptions\n          ? filteredOptions.map((item, i) => (\n              <SearchDropdownOption\n                key={`SearchOption-${item.label}|${i}`}\n                active={i === index}\n                label={item.label}\n                provider={item.provider}\n                type={item.type}\n                competency={item.competency}\n                onClick={() => onClickHandler(item, i)}\n              />\n            ))\n          : null}\n      </StyledSearchList>\n    </>\n  )\n}\n\nSearchDropdown.displayName = 'SearchDropdown'\n"],"names":["SearchDropdown","props","className","index","inputValue","initializeOpen","errorMessage","options","searchPlaceholder","onSelectChange","onInputChange","ref","React","useRef","useState","isOpen","setOpen","filteredOptions","setFilteredOptions","handleClickOutside","event","current","_ref$current","contains","target","useEffect","document","addEventListener","removeEventListener","StyledSearchDropdownWrapper","SearchButton","placeholder","state","value","onFocus","onChange","filter","option","label","_option$label","toLowerCase","includes","searchIcon","IconSearch","searchType","StyledSearchList","active","isSearchable","map","item","i","SearchDropdownOption","key","provider","type","competency","onClick","onClickHandler","displayName"],"mappings":"8bAOaA,EAAgD,SAAAC,OAEzDC,EASED,EATFC,UACAC,EAQEF,EARFE,MACAC,EAOEH,EAPFG,aAOEH,EANFI,eAAAA,gBACAC,EAKEL,EALFK,eAKEL,EAJFM,QAAAA,aAAU,KACVC,EAGEP,EAHFO,kBACAC,EAEER,EAFFQ,eACAC,EACET,EADFS,cAGIC,EAAMC,EAAMC,OAAuB,QAEfD,EAAME,SAAST,YAAlCU,OAAQC,SAC+BJ,EAAME,SAASP,YAAtDU,OAAiBC,OAElBC,EAAqB,SAACC,mBACrBT,EAAIU,sBAAJC,EAAaC,SAASH,EAAMI,SAC/BR,GAAQ,IAIZJ,EAAMa,WAAU,kBACdC,SAASC,iBAAiB,QAASR,GAAoB,GAEhD,WACLO,SAASE,oBAAoB,QAAST,GAAoB,cAyB5DP,gCACEA,gBAACiB,GAA4B3B,UAAWA,EAAWS,IAAKA,GACtDC,gBAACkB,GACCC,YAAavB,EACbwB,MAAO1B,EAAe,QAAU,OAChCA,aAAcA,EACd2B,MAAO7B,EACP8B,QA5BQ,WACdlB,GAAQ,IA4BFmB,SApBqB,SAAAf,OACnBa,EAAUb,EAAMI,OAAhBS,MACRf,EACEe,EACI1B,EAAQ6B,QAAO,SAAAC,gBAAUA,MAAAA,aAAAA,EAAQC,0BAARC,EAAeC,cAAcC,SAASR,EAAMO,kBACrEjC,GAGNG,EAAcU,IAaRsB,WAAY9B,gBAAC+B,QACbC,WAAW,UAGfhC,gBAACiC,GAAiBC,OAAQ/B,EAAQgC,iBAC/B9B,EACGA,EAAgB+B,KAAI,SAACC,EAAMC,UACzBtC,gBAACuC,GACCC,2BAAqBH,EAAKX,kBAASY,GACnCJ,OAAQI,IAAM/C,EACdmC,MAAOW,EAAKX,MACZe,SAAUJ,EAAKI,SACfC,KAAML,EAAKK,KACXC,WAAYN,EAAKM,WACjBC,QAAS,kBAxCA,SAACP,EAAM9C,GAC5Ba,GAAQ,GACRP,EAAewC,EAAM9C,GAsCMsD,CAAeR,EAAMC,SAGxC,QAMZlD,EAAe0D,YAAc"}