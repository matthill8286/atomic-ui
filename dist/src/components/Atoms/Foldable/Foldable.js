import{inherits as t,createSuper as e,createClass as i,classCallCheck as n,defineProperty as o,assertThisInitialized as a,objectWithoutProperties as r,extends as s}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import h from"react";import{styled as l}from"../../../styles/styled.js";var p=l.div.withConfig({displayName:"Foldable__StyledFoldable",componentId:"sc-16h3jw3-0"})(["overflow:hidden;",""],(function(t){var e=t.looksOpenFromBreakpoint;return e&&"\n    @media (min-width: ".concat(e,"px) {\n      height: auto !important;\n    }\n  ")})),u=function(l){t(c,l);var u=e(c);function c(t){var e;return n(this,c),e=u.call(this,t),o(a(e),"entryRef",void 0),o(a(e),"standardDuration",void 0),o(a(e),"maxDuration",void 0),o(a(e),"_afterTransition",(function(){e.props.isOpen&&e.setState({height:"auto"})})),e.entryRef=h.createRef(),e.standardDuration=300,e.maxDuration=1e3,e.state={height:e._getHeight(),transition:"height ".concat(e.standardDuration,"ms linear"),looksOpenFromBreakpoint:t.looksOpenInitiallyFromBreakpoint},e}return i(c,[{key:"componentDidMount",value:function(){this.props.isOpen&&this._updateHeightBeforeTransition()}},{key:"componentDidUpdate",value:function(t){this.props.isOpen!==t.isOpen&&this._updateHeightBeforeTransition()}},{key:"render",value:function(){var t=this.props;t.isOpen;var e=r(t,["isOpen"]),i=this.state.looksOpenFromBreakpoint;return h.createElement(p,s({"data-test":"foldable",style:this._applyTransition(),onTransitionEnd:this._afterTransition,className:this.props.className,looksOpenFromBreakpoint:i},e),h.createElement("div",{"data-test":"inner-foldable",ref:this.entryRef},this.props.children))}},{key:"_scrollToElement",value:function(t){var e=this.entryRef.current;setTimeout((function(){if(((null==e?void 0:e.getBoundingClientRect())||{top:0}).top<0){window.scrollTo(0,0);var t=(null==e?void 0:e.getBoundingClientRect())||{top:0,height:0};window.scrollTo(0,t.top-t.height)}}),t)}},{key:"_updateHeightBeforeTransition",value:function(){var t,e=this,i=!!this.state.looksOpenFromBreakpoint,n=this.entryRef.current,o=this._getDuration(),a=this._getAnimationType(o),r=i?"auto":null!==(t=null==n?void 0:n.clientHeight)&&void 0!==t?t:"auto",s=i?"":"height ".concat(o,"ms ").concat(a);this.setState({height:r,transition:s,looksOpenFromBreakpoint:void 0},(function(){e.props.isOpen?e._scrollToElement(o):e._updateTransition()}))}},{key:"_getDuration",value:function(){var t=this.props.isOpen,e=this.entryRef.current,i=!!e&&e.clientHeight/2;return i&&t?i>this.maxDuration?this.maxDuration:i<this.standardDuration?this.standardDuration:i:this.standardDuration}},{key:"_getAnimationType",value:function(t){var e=this.props.isOpen;return t===this.standardDuration?"linear":e?"ease-in":"ease-out"}},{key:"_updateTransition",value:function(){var t=this._getDuration(),e=this._getAnimationType(t);this.setState({height:this._getHeight(),transition:"height ".concat(t,"ms ").concat(e)})}},{key:"_applyTransition",value:function(){return{height:this.state.height,transition:this.state.transition}}},{key:"_getHeight",value:function(){return this.props.isOpen?"auto":0}}]),c}(h.Component);export{u as Foldable,p as StyledFoldable};
//# sourceMappingURL=Foldable.js.map
