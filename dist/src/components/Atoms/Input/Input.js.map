{"version":3,"file":"Input.js","sources":["../../../../../src/components/Atoms/Input/Input.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { CopyText } from '../Typography'\nimport { InputProps, MapStateToColor } from './Input.interface'\nimport { StyledHelpWrapper, StyledInput, StyledInputMask, StyledInputWrapper } from './Input.styled'\nimport { InputDivider } from './InputDivider'\nimport { InputIcon, InputIconState } from './InputIcon'\nimport { InputLabel } from './InputLabel'\n\nconst mapStateToColor: MapStateToColor = {\n  idle: 'grey3',\n  valid: 'success',\n  error: 'error',\n  disabled: 'grey2',\n}\n\nconst mapStateToIconState = {\n  valid: 'valid',\n  error: 'error',\n}\n\nexport const Input: React.FC<InputProps> = props => {\n  const {\n    autofocus = false,\n    className,\n    errorMessage,\n    helper,\n    helpText,\n    iconLabel,\n    inputIcon,\n    inputIconSize,\n    inputMaskProps,\n    inputMaskRef,\n    inputProps,\n    inputRef,\n    inputStyle = 'default',\n    inputType = 'text',\n    label = '',\n    margin = '',\n    onBlur,\n    onChange,\n    onClick,\n    onClickIcon,\n    onFocus,\n    onKeyDown,\n    onKeyUp,\n    onMouseEnter,\n    onMouseLeave,\n    padding = '',\n    placeholder = '',\n    state = 'idle',\n    value,\n  } = props\n\n  const [shrink, changeShrink] = useState<boolean>(!!value)\n  const [isFocus, changeFocus] = useState<boolean>(autofocus)\n  const [isHover, changeHover] = useState<boolean>(false)\n\n  React.useEffect(() => {\n    changeShrink(isFocus || !!value)\n  }, [value])\n\n  const onMouseEnterHandler = (ev: React.MouseEvent<HTMLInputElement>) => {\n    if (!['error', 'disabled'].includes(state)) {\n      changeHover(true)\n    }\n    if (onMouseEnter) onMouseEnter(ev)\n  }\n\n  const onMouseLeaveHandler = (ev: React.MouseEvent<HTMLInputElement>) => {\n    if (onMouseLeave) onMouseLeave(ev)\n    changeHover(false)\n  }\n\n  const onFocusHandler = (ev: React.FocusEvent<HTMLInputElement>) => {\n    if (onFocus) onFocus(ev)\n    changeShrink(true)\n    changeFocus(true)\n  }\n\n  const onBlurHandler = (ev: React.FocusEvent<HTMLInputElement>) => {\n    if (onBlur) onBlur(ev)\n    if (!value) {\n      changeShrink(false)\n    }\n    changeFocus(false)\n  }\n\n  const onChangeHandler = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    if (onChange) onChange(ev)\n  }\n\n  const onClickHandler = (ev: React.MouseEvent<HTMLInputElement>) => {\n    ev.stopPropagation()\n    if (onClick) onClick(ev)\n  }\n\n  const onClickIconHandler = (ev: React.MouseEvent<HTMLInputElement>) => {\n    ev.stopPropagation()\n\n    if (onClickIcon) {\n      onClickIcon(ev)\n    }\n  }\n\n  const showError = state === 'error' && errorMessage\n  const showIcon = state === 'valid' || state === 'error' || inputIcon\n  const color = isFocus || isHover ? 'grey5' : mapStateToColor[state]\n  const iconState: InputIconState = mapStateToIconState[state] || 'default'\n  const isRequired = !!inputProps?.required\n\n  const combinedInputProps = {\n    ...inputProps,\n    placeholder: placeholder,\n    autoFocus: autofocus,\n    type: inputType,\n    value,\n    onMouseEnter: onMouseEnterHandler,\n    onMouseLeave: onMouseLeaveHandler,\n    onClick: onClickHandler,\n    onFocus: onFocusHandler,\n    onChange: onChangeHandler,\n    onKeyUp: onKeyUp,\n    onKeyDown: onKeyDown,\n    onBlur: onBlurHandler,\n    disabled: state === 'disabled',\n  }\n\n  const isAriaInvalid = state === 'error' ? true : false\n  const ariaAttrs = {\n    'aria-invalid': isAriaInvalid,\n    'aria-required': isRequired,\n    required: isRequired,\n  }\n\n  return (\n    <StyledInputWrapper className={className} margin={margin} padding={padding}>\n      <InputLabel\n        color={color}\n        htmlFor={inputProps?.id}\n        inputStyle={inputStyle}\n        label={label}\n        shrink={shrink}>\n        {inputMaskProps ? (\n          <StyledInputMask\n            {...inputMaskProps}\n            {...combinedInputProps}\n            {...ariaAttrs}\n            data-test={inputMaskProps?.name}\n            ref={inputMaskRef}\n          />\n        ) : (\n          <StyledInput\n            {...combinedInputProps}\n            {...ariaAttrs}\n            data-test={inputProps?.name}\n            ref={inputRef}\n          />\n        )}\n      </InputLabel>\n\n      {showIcon && (\n        <InputIcon\n          icon={inputIcon}\n          iconLabel={iconLabel}\n          iconSize={inputIconSize}\n          iconState={iconState}\n          onClick={onClickIcon ? onClickIconHandler : undefined}\n        />\n      )}\n\n      {showError && <InputDivider color={color} />}\n\n      {showError && (\n        <StyledHelpWrapper inputStyle={inputStyle}>\n          <CopyText tag=\"span\" color=\"error\" fontSize=\"xxs\">\n            {errorMessage}\n          </CopyText>\n        </StyledHelpWrapper>\n      )}\n\n      {helper && <StyledHelpWrapper inputStyle={inputStyle}>{helper}</StyledHelpWrapper>}\n\n      {helpText && (\n        <StyledHelpWrapper inputStyle={inputStyle}>\n          <CopyText tag=\"span\" fontSize=\"xxs\">\n            {helpText}\n          </CopyText>\n        </StyledHelpWrapper>\n      )}\n    </StyledInputWrapper>\n  )\n}\n\nInput.displayName = 'Input'\n"],"names":["mapStateToColor","idle","valid","error","disabled","mapStateToIconState","Input","props","autofocus","className","errorMessage","helper","helpText","iconLabel","inputIcon","inputIconSize","inputMaskProps","inputMaskRef","inputProps","inputRef","inputStyle","inputType","label","margin","onBlur","onChange","onClick","onClickIcon","onFocus","onKeyDown","onKeyUp","onMouseEnter","onMouseLeave","padding","placeholder","state","value","useState","shrink","changeShrink","isFocus","changeFocus","isHover","changeHover","React","useEffect","showError","showIcon","color","iconState","isRequired","required","combinedInputProps","autoFocus","type","ev","includes","stopPropagation","ariaAttrs","StyledInputWrapper","InputLabel","htmlFor","id","StyledInputMask","name","ref","StyledInput","InputIcon","icon","iconSize","undefined","InputDivider","StyledHelpWrapper","CopyText","tag","fontSize","displayName"],"mappings":"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"}